(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76b64e3a"],{"83f3":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-container"},[a("div",{staticClass:"title-div"},[e._v(" 项目管理-我的项目 "),a("img",{staticClass:"title-img",attrs:{src:e.doing2x}}),a("div",{staticClass:"title-status"},[e._v("进行中："+e._s(e.title[0])+"项")]),a("img",{staticClass:"title-img",attrs:{src:e.finish2x}}),a("div",{staticClass:"title-status"},[e._v("已完结："+e._s(e.title[1])+"项")])]),a("div",{staticClass:"button-div"},[a("el-button",{staticClass:"proj-button my-button"},[e._v("我的项目")]),a("el-button",{staticClass:"proj-button site-button"},[e._v("站内项目")]),a("el-button",{staticClass:"proj-button create-button",on:{click:function(t){e.dialogVisible=!0}}},[e._v("发起项目")])],1),a("router-view"),a("el-dialog",{attrs:{title:"创建项目",visible:e.dialogVisible,width:"984px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"form-item dialog-name"},[a("div",{staticClass:"form-tag"},[e._v("项目名称：")]),a("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.createForm.title,callback:function(t){e.$set(e.createForm,"title",t)},expression:"createForm.title"}})],1),a("div",{staticClass:"form-item dialog-des"},[a("div",{staticClass:"form-tag"},[e._v("项目简介：")]),a("el-input",{attrs:{type:"textarea",maxlength:"400","show-word-limit":"",autosize:{minRows:6,maxRows:10},placeholder:"请输入项目简介"},model:{value:e.createForm.description,callback:function(t){e.$set(e.createForm,"description",t)},expression:"createForm.description"}})],1),a("div",{staticClass:"form-item dialog-opt"},[a("div",{staticClass:"form-tag"},[e._v("项目成员：")]),a("el-select",{attrs:{clearable:"",placeholder:"组别"},model:{value:e.grouper.group,callback:function(t){e.$set(e.grouper,"group",t)},expression:"grouper.group"}},e._l(e.groupOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{attrs:{clearable:"",placeholder:"校区"},model:{value:e.grouper.campus,callback:function(t){e.$set(e.grouper,"campus",t)},expression:"grouper.campus"}},e._l(e.campusOption,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),a("el-select",{attrs:{clearable:"",placeholder:"角色"},model:{value:e.grouper.role,callback:function(t){e.$set(e.grouper,"role",t)},expression:"grouper.role"}},e._l(e.roleOption,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),a("el-select",{attrs:{clearable:"",placeholder:"姓名"},model:{value:e.grouperOnly.name,callback:function(t){e.$set(e.grouperOnly,"name",t)},expression:"grouperOnly.name"}},e._l(e.selesctData,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),a("i",{staticClass:"el-icon-circle-plus",on:{click:e.handleAdd}})],1),a("div",{staticClass:"form-item dialog-mem"},e._l(e.addMem,(function(t,l){return a("el-tag",{key:l,attrs:{closable:"","disable-transitions":!1,color:"#F1F2F9"},on:{close:function(t){return e.handleClose(l)}}},[e._v(" "+e._s(t.name)+" ")])})),1),a("button",{staticClass:"create-button",on:{click:e.handleSub}},[e._v("确认录入")])])],1)},o=[],s=(a("4160"),a("a434"),a("b0c0"),a("159b"),a("5530")),i=a("76e2"),r=a.n(i),n=a("be67"),c=a.n(n),u=a("c24f"),d={name:"projMain",data:function(){return{dialogVisible:!1,doing2x:r.a,finish2x:c.a,title:[3,3],groupOption:[{value:"前端组",label:"前端组"},{value:"程序组",label:"程序组"},{value:"产品组",label:"产品组"},{value:"设计组",label:"设计组"},{value:"安卓组",label:"安卓组"},{value:"IOS",label:"iOS"}],campusOption:["卫津路","北洋园"],roleOption:["站长","组长","组员","实习","骨灰"],createForm:{title:"",description:""},grouper:{user_id:"",group:"",campus:"",role:""},grouperOnly:{project_id:"",user_id:"",group:"",name:""},data:[],selesctData:[],addMem:[]}},methods:{fetchData:function(){var e=this;Object(u["r"])().then((function(t){t.data.data.forEach((function(t){e.data.push(t)}))}))},handleAdd:function(){var e,t=this;this.selesctData.forEach((function(a){a.name==t.grouperOnly.name&&(e={project_id:"",user_id:a.id,group:a.group_name,name:a.name})}));var a=!0;this.addMem.forEach((function(t){t.user_id==e.user_id&&(a=!1)})),a?this.addMem.push(e):this.$message({message:"已添加该成员",type:"error",duration:5e3})},handleClose:function(e){this.addMem.splice(e,1)},handleSub:function(){var e=this,t=this.$loading({lock:!0,text:"创建中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(u["g"])(this.createForm).then((function(a){e.addMem.forEach((function(e){e.project_id=a.data.project_id}));var l=null;l=Object(s["a"])({},e.addMem);var o={data:l,project_id:a.data.project_id};Object(u["d"])(o).then((function(){t.close(),e.$message({message:"创建任务成功",type:"success",duration:5e3})})).catch((function(){t.close(),e.$message({message:"添加成员失败",type:"error",duration:5e3})}))})).catch((function(a){t.close(),e.$message({message:"创建失败"+a,type:"error",duration:5e3})}))}},created:function(){this.fetchData()},watch:{grouper:{handler:function(e){var t=this;this.grouperOnly.name="",this.selesctData.length=0,this.data.forEach((function(a){""!=e.role&&e.role!=a.group_role||""!=e.campus&&e.campus!=a.campus||""!=e.group&&e.group!=a.group_name||t.selesctData.push(a)}))},deep:!0}}},p=d,m=(a("e8c8"),a("2877")),g=Object(m["a"])(p,l,o,!1,null,"878ca5cc",null);t["default"]=g.exports},"9f63":function(e,t,a){},e8c8:function(e,t,a){"use strict";var l=a("9f63"),o=a.n(l);o.a}}]);
//# sourceMappingURL=chunk-76b64e3a.bf1c0faa.js.map