(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4346e226"],{"23af":function(e,s,t){"use strict";var a=t("bf78"),i=t.n(a);i.a},"90ae":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"main-box"},[t("div",{staticClass:"first-line-box"},[e._m(0),t("div",{staticClass:"user-info-main"},[t("div",{staticClass:"userinfo-left"},[t("div",{staticClass:"left-line head-line"},[t("div",{staticClass:"head-title-word"},[e._v("头像")]),t("img",{staticClass:"head-img",attrs:{src:e.head}}),t("div",{staticClass:"upload-div"},[t("el-upload",{staticClass:"upload",attrs:{action:"#",name:"avatar",multiple:!1,"http-request":e.handleUpload,"file-list":e.file,"auto-upload":!0,"on-exceed":e.handleExceed,"show-file-list":!1}},[t("button",{staticClass:"upload-head",attrs:{size:"small",type:"primary"}},[e._v("更改>>")])])],1)]),t("div",{staticClass:"left-line"},[e._v(" 账号 "),t("span",{staticClass:"left-span"},[e._v(e._s(e.userInfo.student_id))])]),t("div",{staticClass:"left-line"},[e._v(" 姓名 "),t("span",{staticClass:"left-span"},[e._v(e._s(e.userInfo.name))])]),t("div",{staticClass:"left-line"},[e._v(" 组别 "),t("span",{staticClass:"left-span"},[e._v(e._s(e.userInfo.group))])]),t("div",{staticClass:"left-line"},[e._v(" 角色 "),t("span",{staticClass:"left-span"},[e._v(e._s(e.userInfo.group_role))])]),t("div",{staticClass:"left-line"},[e._v(" 邮箱 "),t("span",{staticClass:"left-span"},[e._v(e._s(e.email))])])]),t("div",{staticClass:"userinfo-right"},[t("div",{staticClass:"userinfo-right-title"},[e._v("时间统计")]),t("div",{staticClass:"userinfo-right-detail"},[e._v(" 使用登记了 Mac 地址的设备，连接工作室 Wi-Fi 网络，即可开始计算在线时长。以下统计将用于工作室的钥匙发放、固定工位分配的参考。 ")]),t("div",{staticClass:"userinfo-info"},[e._v(" 今天是你加入天外天的第 "),t("span",{staticClass:"blue-word"},[e._v(e._s(e.userInfo.date))]),e._v(" 天"),t("br"),e._v(" 你已在工作室累计工作时长 "),t("span",{staticClass:"blue-word"},[e._v(e._s(e.userInfo.hour))]),e._v(" 小时"),t("br"),e._v(" 本周工作时长 "),t("span",{staticClass:"blue-word"},[e._v(e._s(99999))]),e._v(" 小时 ")])])])]),t("div",{staticClass:"second-line-box"},[e._m(1),t("div",{staticClass:"changepassword-main"},[t("el-form",{ref:"ruleForm",attrs:{"hide-required-asterisk":!0,model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"166px"}},[t("el-form-item",{attrs:{label:"新密码",prop:"pass"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(s){e.$set(e.ruleForm,"pass",s)},expression:"ruleForm.pass"}})],1),t("div",{staticClass:"pass-explain"},[e._v(" 为确保信息安全，请养成良好的密码使用习惯，不得使用弱密码，尽量避免同一密码多处使用。"),t("br"),e._v(" 请设置最少 8 位的密码，建议包含 大、小写字母，数字，符号 中的至少三种。 ")]),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(s){e.$set(e.ruleForm,"checkPass",s)},expression:"ruleForm.checkPass"}})],1),t("el-form-item",[t("button",{staticClass:"changePass-button",attrs:{type:"primary"},on:{click:function(s){return e.handleSub("ruleForm")}}},[e._v("保存修改")])])],1)],1)]),t("div",{staticClass:"third-line-box"},[e._m(2),t("div",{staticClass:"emailchangepass-main"},[t("el-form",{ref:"emailForm",attrs:{"hide-required-asterisk":!0,model:e.emailForm,"status-icon":"",rules:e.emailRules,"label-width":"166px"}},[t("el-form-item",{attrs:{label:"邮箱地址"}},[t("div",{staticClass:"email-div"},[e._v("xxx@twt.edu.cn")])]),t("el-form-item",{attrs:{label:"新密码",prop:"pass"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.emailForm.pass,callback:function(s){e.$set(e.emailForm,"pass",s)},expression:"emailForm.pass"}})],1),t("div",{staticClass:"pass-explain"},[e._v(" 邮箱账号独立于其他内网系统，如您未激活过账号，可直接在此重置密码进行激活。"),t("br"),e._v(" 登录时，Username 为包含 @twt.edu.cn 的完整地址。 ")]),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.emailForm.checkPass,callback:function(s){e.$set(e.emailForm,"checkPass",s)},expression:"emailForm.checkPass"}})],1),t("el-form-item",[t("button",{staticClass:"changePass-button",attrs:{type:"primary"},on:{click:function(s){return e.handleSubEmail("emailForm")}}},[e._v("保存修改")])])],1)],1)])])},i=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"info-title-box"},[t("div",{staticClass:"title-word"},[e._v(" 个人信息 "),t("span",{staticClass:"title-detail"},[e._v("个人信息修改前请联系组长")])])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"info-title-box"},[t("div",{staticClass:"title-word"},[e._v(" 修改密码 ")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"info-title-box"},[t("div",{staticClass:"title-word"},[e._v(" @twt.edu.cn ")])])}],r=(t("13d5"),t("d3b7"),t("5cc6"),t("9a8c"),t("a975"),t("735e"),t("c1ac"),t("d139"),t("3a7b"),t("d5d6"),t("82f8"),t("e91f"),t("60bd"),t("5f96"),t("3280"),t("3fcc"),t("ca91"),t("25a1"),t("cd26"),t("3c5d"),t("2954"),t("649e"),t("219c"),t("170b"),t("b39a"),t("72f7"),t("c6eb")),l=t.n(r),n=t("c24f"),o={name:"userDetail",data:function(){var e=this,s=function(s,t,a){""===t?a(new Error("请再次输入密码")):t!==e.ruleForm.pass?a(new Error("两次输入密码不一致!")):a()};return{email:"",head:l.a,file:[],userInfo:this.$store.getters.userInfo,ruleForm:{pass:"",checkPass:""},emailForm:{pass:"",checkPass:""},rules:{pass:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/,message:"密码必须包含数字和字母，长度为 8 - 16位"}],checkPass:[{validator:s,trigger:"blur"}]},emailRules:{pass:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/,message:"密码必须包含数字和字母，长度为 8 - 16位"}],checkPass:[{validator:s,trigger:"blur"}]}}},methods:{handleSubEmail:function(){this.$message({message:"该功能暂未开放",type:"error",duration:5e3})},handleSub:function(e){var s=this;this.$refs[e].validate((function(e){if(!e)return s.$message({message:"密码不符合要求",type:"error",duration:5e3}),!1;Object(n["e"])({id:s.userInfo.id,password:s.ruleForm.pass}).then((function(e){200===e.status&&s.$message({message:"修改成功",type:"success",duration:5e3})}))}))},handleExceed:function(){this.$message({message:"请上传单个文件",type:"error",duration:5e3})},handleUpload:function(e){var s=this,t="image/jpeg"===e.file.type,a="image/png"===e.file.type,i=e.file.size/1024/1024<10;if(t||a||this.$message.error("格式错误"),i||this.$message.error("图片过大"),(t||a)&&i){window.console.log(e.file);var r=new FormData;r.append("avatar",e.file),r.append("id",this.userInfo.id),Object(n["u"])(r).then((function(e){200===e.status?(s.$message({message:"上传成功",type:"success",duration:5e3}),s.$router.go(0)):s.$message.error("上传失败了")})).catch((function(e){s.$message.error("上传失败"+e)}))}},getEmail:function(){var e=this;Object(n["k"])({id:this.userInfo.id}).then((function(s){e.email=s.data.student[0].email}))}},mounted:function(){var e=this;Object(n["m"])().then((function(e){return"data:image/png;base64,"+btoa(new Uint8Array(e.data).reduce((function(e,s){return e+String.fromCharCode(s)}),""))})).then((function(s){e.head=s}))},created:function(){this.getEmail()}},c=o,u=(t("23af"),t("2877")),d=Object(u["a"])(c,a,i,!1,null,"575805f8",null);s["default"]=d.exports},bf78:function(e,s,t){}}]);
//# sourceMappingURL=chunk-4346e226.e4bd6e6f.js.map