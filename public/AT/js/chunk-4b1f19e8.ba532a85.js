(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b1f19e8"],{"4d0c":function(e,t,a){},5365:function(e,t,a){"use strict";var s=a("4d0c"),n=a.n(s);n.a},"6efe":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-div"},[a("div",{staticClass:"button-div"},[a("div",{staticClass:"mem-num"},[e._v("项目成员（"+e._s(e.projInfo.member.length)+"）")]),a("button",{staticClass:"head-button add-button",on:{click:function(t){e.addVisible=!0}}},[e._v("添加成员")]),a("button",{staticClass:"head-button select-button",style:e.changeSelectStype(),on:{click:e.handleSelected}},[e.selected?e._e():a("span",[e._v("选择成员")]),e.selected?a("span",[e._v("取消")]):e._e()]),e.selected?a("button",{staticClass:"head-button move-head-button",on:{click:e.changeGroupHead}},[e._v("转让组长")]):e._e(),e.selected?a("button",{staticClass:"head-button remove-button",on:{click:e.removeMem}},[e._v("移除成员")]):e._e()]),e._l(e.projInfo.member,(function(t,s){return a("div",{key:s,staticClass:"mem-item",on:{click:function(a){return e.handleChoose(s,t)}}},[a("div",{staticClass:"item-head"},[a("el-progress",{attrs:{type:"circle",width:50,"stroke-width":2,"show-text":!1,percentage:25}}),a("img",{staticClass:"img-head",attrs:{src:e.head}}),a("div",{staticClass:"item-title"},[a("span",[e._v(e._s(e.getRole()))]),e._v("："+e._s(t.name)+"（"+e._s(t.group_name)+"）")]),a("div",{staticClass:"item-line"}),a("div",{staticClass:"item-time"},[e._v("加入项目时间："+e._s(t.created_at))]),a("div",{staticClass:"item-task"},[e._v("任务数:"+e._s(t.task_num))]),a("img",{staticClass:"online-img",attrs:{src:e.doing2x}})],1)])})),a("el-dialog",{attrs:{title:"添加成员",visible:e.addVisible,width:"984px"},on:{"update:visible":function(t){e.addVisible=t}}},[a("div",{staticClass:"form-item dialog-opt"},[a("div",{staticClass:"form-tag"},[e._v("项目成员：")]),a("el-select",{attrs:{clearable:"",placeholder:"组别"},model:{value:e.grouper.group,callback:function(t){e.$set(e.grouper,"group",t)},expression:"grouper.group"}},e._l(e.groupOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{attrs:{clearable:"",placeholder:"校区"},model:{value:e.grouper.campus,callback:function(t){e.$set(e.grouper,"campus",t)},expression:"grouper.campus"}},e._l(e.campusOption,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),a("el-select",{attrs:{clearable:"",placeholder:"角色"},model:{value:e.grouper.role,callback:function(t){e.$set(e.grouper,"role",t)},expression:"grouper.role"}},e._l(e.roleOption,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),a("el-select",{attrs:{clearable:"",placeholder:"姓名"},model:{value:e.grouperOnly.name,callback:function(t){e.$set(e.grouperOnly,"name",t)},expression:"grouperOnly.name"}},e._l(e.selesctData,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),a("i",{staticClass:"el-icon-circle-plus",on:{click:e.handleAdd}})],1),a("div",{staticClass:"form-item dialog-mem"},e._l(e.addMem,(function(t,s){return a("el-tag",{key:s,attrs:{closable:"","disable-transitions":!1,color:"#F1F2F9"},on:{close:function(t){return e.handleClose(s)}}},[e._v(" "+e._s(t.name)+" ")])})),1),a("button",{staticClass:"create-button",on:{click:function(t){return e.handleSub()}}},[e._v("确认录入")])])],2)},n=[],o=(a("4160"),a("fb6a"),a("a434"),a("b0c0"),a("159b"),a("5530")),i=a("f451"),r=a.n(i),l=a("76e2"),c=a.n(l),u=a("be67"),d=a.n(u),m=a("c24f"),p={name:"ProjDetailMem",data:function(){return{selectedIndex:NaN,selectedMem:null,addVisible:!1,selected:!1,doing2x:c.a,finish2x:d.a,head:r.a,projInfo:this.$store.getters.projInfo,groupOption:[{value:"前端组",label:"前端组"},{value:"程序组",label:"程序组"},{value:"产品组",label:"产品组"},{value:"设计组",label:"设计组"},{value:"安卓组",label:"安卓组"},{value:"IOS",label:"iOS"}],campusOption:["卫津路","北洋园"],roleOption:["站长","组长","组员","实习","骨灰"],grouper:{user_id:"",group:"",campus:"",role:""},grouperOnly:{project_id:"",user_id:"",group:"",name:""},data:[],selesctData:[],addMem:[]}},methods:{fetchData:function(){var e=this;Object(m["r"])().then((function(t){t.data.data.forEach((function(t){e.data.push(t)}))}))},handleSelected:function(){this.selected=!this.selected},changeSelectStype:function(){return this.selected?"background-color:#7d7f81":""},handleAdd:function(){var e,t=this;this.selesctData.forEach((function(a){a.name==t.grouperOnly.name&&(e={project_id:"",user_id:a.id,group:a.group_name,name:a.name})}));var a=!0;this.addMem.forEach((function(t){t.user_id==e.user_id&&(a=!1)})),this.projInfo.member.forEach((function(t){t.member_id==e.user_id&&(a=!1)})),a?this.addMem.push(e):this.$message({message:"已添加该成员",type:"error",duration:5e3})},handleClose:function(e){this.addMem.splice(e,1)},handleSub:function(){var e=this,t=Object(o["a"])({},this.addMem),a={data:t,project_id:this.$store.getters.projDetailID.id};Object(m["d"])(a).then((function(){e.$message({message:"添加成员成功",type:"success",duration:5e3})})).catch((function(){e.$message({message:"添加成员失败",type:"error",duration:5e3})}))},handleChoose:function(e,t){if(this.selected){var a=window.document.getElementsByClassName("mem-item");a.forEach((function(e){e.style.backgroundColor="#fff",e.style.cursion="pointer"})),a[e].style.backgroundColor="#CCD1D6",this.selectedMem=t,this.selectedIndex=e}},removeMem:function(){var e=this;Object(m["i"])({project_id:this.$store.getters.projDetailID.id,name:this.selectedMem.name,user_id:this.selectedMem.member_id}).then((function(){e.projInfo.member.slice(e.selectedIndex,1),e.$message({message:"删除成员成功",type:"success",duration:5e3})})).catch((function(){e.$message({message:"删除成员失败",type:"error",duration:5e3})}))},changeGroupHead:function(){var e=this;Object(m["t"])({project_id:this.$store.getters.projDetailID.id,name:this.selectedMem.name,user_id:this.selectedMem.member_id}).then((function(){e.$message({message:"转让组长成功",type:"success",duration:5e3})})).catch((function(){e.$message({message:"转让组长失败",type:"error",duration:5e3})}))},getRole:function(){return"组员"}},created:function(){this.fetchData()},watch:{grouper:{handler:function(e){var t=this;this.grouperOnly.name="",this.selesctData.length=0,this.data.forEach((function(a){""!=e.role&&e.role!=a.group_role||""!=e.campus&&e.campus!=a.campus||""!=e.group&&e.group!=a.group_name||t.selesctData.push(a)}))},deep:!0}}},h=p,f=(a("5365"),a("2877")),g=Object(f["a"])(h,s,n,!1,null,"dce6bca4",null);t["default"]=g.exports},f451:function(e,t,a){e.exports=a.p+"img/member2x.d764eb89.png"},fb6a:function(e,t,a){"use strict";var s=a("23e7"),n=a("861d"),o=a("e8b5"),i=a("23cb"),r=a("50c4"),l=a("fc6a"),c=a("8418"),u=a("b622"),d=a("1dde"),m=a("ae40"),p=d("slice"),h=m("slice",{ACCESSORS:!0,0:0,1:2}),f=u("species"),g=[].slice,b=Math.max;s({target:"Array",proto:!0,forced:!p||!h},{slice:function(e,t){var a,s,u,d=l(this),m=r(d.length),p=i(e,m),h=i(void 0===t?m:t,m);if(o(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!o(a.prototype)?n(a)&&(a=a[f],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return g.call(d,p,h);for(s=new(void 0===a?Array:a)(b(h-p,0)),u=0;p<h;p++,u++)p in d&&c(s,u,d[p]);return s.length=u,s}})}}]);
//# sourceMappingURL=chunk-4b1f19e8.ba532a85.js.map